<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view contentType="text/html" xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ds="http://deltaspike.apache.org/jsf"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="http://richfaces.org/a4j">
  <html class="new-zanata-html Bgc(#fff) Fz(16px)">

  <h:head>
    <ui:remove>
      <!-- This needs to appear before all other JavaScript, for accurate testing -->
    </ui:remove>
    <h:outputText value="#{ajaxCounter.ajaxCounterScript}" escape="false" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>#{msgs['jsf.Zanata']}: <ui:insert name="page_title"/></title>
    <link rel="shortcut icon" href="#{assets['img/logo/logo.ico']}"
      type="image/x-icon" />
    <link rel="stylesheet" href="#{request.contextPath}/bundle.css" type="text/css"/>
    <link type="text/css" rel="stylesheet"
      href="#{request.contextPath}/resources/fontello/css/fontello.css"/>
    <link type="text/css" rel="stylesheet" class="user"
      href="#{assets['css/zanata.css']}"/>
    <link type="text/css" rel="stylesheet" href="#{assets['css/style.min.css']}"/>

    <ui:insert name="head"/>
  </h:head>

  <h:body styleClass="new-zanata-body Bgc(i) Fz(i)">
    <ds:windowId/>

    <div class='Ai(st) D(f) Fld(c) Flxs(0)'>
      <div class="Ai(st) D(f) Fld(c) Fld(r)--sm Flxs(0) H(100vh)">

        <div id="root" base-url="#{request.contextPath}"
          data='{"loggedIn":#{authenticatedAccountHome.isLoggedIn()},
          "helpUrl": "#{applicationConfigurationAction.helpUrl}",
          "loginUrl": "#{applicationConfigurationAction.getLoginUrl(request)}",
          "logoutUrl": "/account/logout.seam",
          "termsUrl": "#{applicationConfigurationAction.termOfUseUrl}",
          "registerUrl": "#{applicationConfigurationAction.registerUrl}",
          "buildInfo": #{applicationConfigurationAction.buildInfo.getJSON()},
          "permission": #{authenticatedAccountHome.getUserPermission().getJSON()}}'
          user="#{authenticatedAccountHome.getUser()}"/>
        <div id="container" class="Ai(st) D(f) Fld(c)  Flx(flx1) Ov(h)">
          <div id="bd">
            <div id="breadcrumbs_div">
              <ui:include src="breadcrumbs.xhtml"/>
            </div>
            <div id="yui-main">
              <div class="yui-b">
                <a4j:outputPanel ajaxRendered="true">
                  <h:messages id="messages" globalOnly="true"
                    styleClass="message"
                    errorClass="errormsg icon-info-circle-2"
                    infoClass="infomsg icon-info-circle-2"
                    warnClass="warnmsg icon-attention"
                    rendered="#{showGlobalMessages != 'false'}"/>
                </a4j:outputPanel>

                <div id="main_body_content">
                  <ui:insert name="center_content"/>
                </div>
              </div>
            </div>
            <div class="yui-b">
              <ui:insert name="right_content"/>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript"
      src="#{request.contextPath}/frontend.legacy.min.js"></script>

    <ui:include src="scripts.xhtml"/>
  </h:body>
  <ui:remove>
    <!-- The javascriptFinished script needs to appear after all other
            JavaScript, for accurate testing: -->
  </ui:remove>
  <h:outputText value="#{ajaxCounter.javascriptFinishedScript}" escape="false" />
  </html>
</f:view>
